import React from "react";
import DoughnutChart from "./DoughnutChart";
import ActiveStarEnd from "./ActiveStarEnd";
import InactiveStarEnd from "./InactiveStarEnd";

interface Props {
  correctAnswers: number;
  wrongAnswers: number;
  xp: number;
}
const BannerEnd: React.FC<Props> = ({ correctAnswers, wrongAnswers, xp }) => {
  const totalAnswers = correctAnswers + wrongAnswers;
  const progressRate = Math.floor((correctAnswers / totalAnswers) * 100);

  const renderStars = () => {
    if (progressRate === 100) {
      return (
        <>
          <ActiveStarEnd />
          <ActiveStarEnd />
          <ActiveStarEnd />
        </>
      );
    } else if (progressRate >= 66) {
      return (
        <>
          <ActiveStarEnd />
          <ActiveStarEnd />
          <InactiveStarEnd />
        </>
      );
    } else if (progressRate >= 33) {
      return (
        <>
          <ActiveStarEnd />
          <InactiveStarEnd />
          <InactiveStarEnd />
        </>
      );
    } else {
      return (
        <>
          <InactiveStarEnd />
          <InactiveStarEnd />
          <InactiveStarEnd />
        </>
      );
    }
  };

  return (
    <div className="big-banner-end">
      <div className="big-banner-diagram">
        <DoughnutChart
          correctAnswers={correctAnswers}
          wrongAnswers={wrongAnswers}
        />
      </div>
      <div className="big-banner-stars">{renderStars()}</div>
      <div className="big-banner-text">
        <div className="experience">+{xp} XP</div>
        <div className="progress-rate">
          Progress Rate: {progressRate.toFixed(0)}%
        </div>
      </div>
      <svg
        width="1099"
        height="501"
        viewBox="0 0 1099 501"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        transform="scale(0.80)"
        style={{ position: "absolute", bottom: 50 }}
      >
        <path
          d="M5.54104 99.8416C5.19106 90.8879 7.93495 82.0867 13.3113 74.9183L48.5347 27.9537C56.0489 17.9348 67.9173 12.1339 80.4389 12.3601L503.5 20H558.782C567.965 20 576.854 23.2406 583.882 29.1509L584.647 29.7943C591.353 35.4333 599.763 38.65 608.52 38.9258L826.978 45.8064C840.644 46.2368 853.087 53.7925 859.772 65.7198L893.341 125.616C896.606 131.441 898.32 138.007 898.32 144.684V309.554C898.32 316.713 896.35 323.734 892.625 329.847L820.715 447.864C819.243 450.281 817.512 452.53 815.552 454.572L794.513 476.501C787.158 484.166 776.994 488.5 766.371 488.5H365.722C362.585 488.5 359.46 488.122 356.414 487.373L248.494 460.85C244.85 459.955 241.097 459.59 237.349 459.767L72.5669 467.538C55.3243 468.351 39.5984 457.732 33.909 441.435L18.9218 398.505C17.6477 394.855 16.9232 391.036 16.7723 387.174L5.54104 99.8416Z"
          fill="white"
        />
        <path
          d="M288.208 34.4215C292.216 34.4215 294.887 34.4215 297.559 34.4215C479.532 34.671 661.653 34.9204 843.625 34.9204C849.859 34.9204 854.164 37.9139 858.468 45.3977C874.35 72.8382 890.677 99.5304 906.559 126.971C908.637 130.713 910.269 136.949 910.269 141.938C910.566 199.813 910.566 257.438 910.269 315.313C910.269 321.05 908.488 328.534 906.113 332.525C880.881 375.931 855.351 418.838 829.673 461.496C827.298 465.487 823.291 468.231 820.025 468.481C741.655 468.98 663.285 468.73 584.767 468.73C584.025 468.73 583.283 468.231 581.205 467.732C587.884 458.003 592.485 448.274 601.985 448.274C668.332 448.773 734.531 448.025 800.878 449.023C814.385 449.272 824.478 443.285 833.829 426.073C852.531 391.897 872.866 360.215 892.161 326.538C895.427 321.05 897.801 311.571 897.801 303.838C898.247 253.447 898.247 203.305 897.95 152.915C897.95 146.429 895.872 138.197 893.2 133.457C880.287 110.507 866.483 89.0531 853.422 66.3523C849.117 58.8685 844.664 56.1245 838.43 56.1245C664.621 56.6234 490.664 56.6234 316.855 57.8707C304.683 57.8707 296.372 51.1353 288.208 34.4215Z"
          fill="#664ECA"
        />
        <path
          d="M576.309 23.9528C570.817 23.9528 567.7 23.9528 564.434 23.9528C398.64 23.9528 232.995 24.2022 67.2007 23.9528C60.8183 23.9528 56.2171 26.6968 51.6158 34.6795C41.0774 54.1373 29.3516 72.3479 18.5164 91.8057C16.29 95.5476 14.6573 102.283 14.5088 107.771C14.212 179.615 14.3604 251.46 14.212 323.553C14.212 332.783 15.6963 339.269 19.7038 345.256C25.4925 354.237 30.539 364.964 36.6246 373.196C46.124 385.669 49.0925 400.886 46.2724 421.092C44.9366 419.595 43.6007 418.348 42.4133 416.602C29.6485 395.148 16.7352 373.944 4.11887 352.241C1.89246 348.25 0.259749 341.514 0.111321 336.026C-0.037107 256.449 -0.037107 177.121 0.111321 97.5433C0.111321 92.5541 1.5956 86.0681 3.82202 82.5757C18.5164 56.8814 33.5076 31.4366 48.9441 6.74009C51.319 2.74874 55.7718 0.503606 59.3341 0.503606C165.015 0.254147 270.547 0.503606 376.228 0.503606C433.372 0.503606 490.517 1.25198 547.662 0.00468764C559.981 -0.244772 567.106 9.48414 576.309 23.9528Z"
          fill="#8772E4"
        />
        <path
          d="M571.411 468.739C567.849 468.739 565.474 468.739 562.951 468.739C391.813 468.988 220.824 469.238 49.6869 468.988C45.8277 468.988 41.2265 465.496 38.1095 461.255C32.4692 453.771 28.3133 443.543 22.5246 436.309C13.0252 424.584 14.2126 409.118 15.2516 389.411C25.1963 406.374 34.2504 421.092 42.7108 436.309C46.5699 443.294 50.7259 445.789 56.3661 445.789C218.301 445.789 380.236 446.287 542.171 446.038C554.49 445.789 563.099 452.025 571.411 468.739Z"
          fill="#9F90DD"
        />
        <path
          d="M315.398 478.625C477.184 478.625 637.487 478.625 798.234 478.625C792.742 493.344 786.36 499.58 776.86 499.58C631.698 499.83 486.684 499.58 341.521 500.578C330.241 500.827 323.116 493.344 315.398 478.625Z"
          fill="#8772E4"
        />
        <path
          d="M727.64 288.888C727.64 268.326 744.308 251.658 764.87 251.658H1061.77C1082.33 251.658 1099 268.326 1099 288.888V288.888C1099 309.45 1082.33 326.118 1061.77 326.118H764.87C744.308 326.118 727.64 309.45 727.64 288.888V288.888Z"
          fill="#664ECA"
        />
        <rect
          x="733.783"
          y="258.247"
          width="358.107"
          height="60.3865"
          rx="30.1933"
          stroke="white"
          strokeWidth="6"
        />
        <path
          d="M660.72 386.912C660.72 366.35 677.388 349.682 697.95 349.682H994.85C1015.41 349.682 1032.08 366.35 1032.08 386.912V386.912C1032.08 407.474 1015.41 424.142 994.85 424.142H697.95C677.388 424.142 660.72 407.474 660.72 386.912V386.912Z"
          fill="#664ECA"
        />
        <rect
          x="666.863"
          y="356.271"
          width="358.107"
          height="60.3865"
          rx="30.1933"
          stroke="white"
          strokeWidth="6"
        />
      </svg>
    </div>
  );
};

export default BannerEnd;
